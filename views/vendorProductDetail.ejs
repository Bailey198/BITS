<!-- RMIT University Vietnam -->
<!-- Course: COSC2430 Web Programming -->
<!-- Semester: 2023B -->
<!-- Assessment: Assignment 2 -->
<!-- Author: Nguyen Tu Quoc Thai ,Nguyen Minh Trong Nhan, Tran Hoang Khiem -->
<!-- ID: s3957050, s3924462, s3966954 -->
<!-- Acknowledgement: W3School, TailwindCss, ChatGPT, Passport documentation, RemixIcons, Freepik, Web Dev Simplified -->

<!DOCTYPE html>
<html lang="en">
<head>
    <%- include("partials/head", {title: "Vendor update product"}) %>
    <script defer src="/js/fileUpload.js"></script>
</head>
<body>
    <%- include('partials/header.ejs') %>
    <main class="flex items-center justify-center h-full bg-cover bg-center">
        <div class="bg-white w-11/12 md:w-7/12 p-10 mx-4 my-4 rounded-2xl shadow-2xl">
            <a href="/users/vendor" class="bg-green-500 hover:bg-green-600 text-white cursor-pointer py-2 px-4 my-8 rounded-md text-center text-base transition duration-300 ease-in-out"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="inline w-5"><path d="M7.82843 10.9999H20V12.9999H7.82843L13.1924 18.3638L11.7782 19.778L4 11.9999L11.7782 4.22168L13.1924 5.63589L7.82843 10.9999Z" fill="rgba(255,255,255,1)"></path></svg> Back to vendor page</a>
            <h1 class="text-center font-bold text-2xl mt-2">Update product</h1>

            <!-- Form -->
            <form action="<%= actions.actionUrl %>" method="post">
              <div class="mb-4">
                  <label class="block text-gray-700 mb-2" for="productName">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 inline"><path d="M4.5 7.65311V16.3469L12 20.689L19.5 16.3469V7.65311L12 3.311L4.5 7.65311ZM12 1L21.5 6.5V17.5L12 23L2.5 17.5V6.5L12 1ZM6.49896 9.97065L11 12.5765V17.625H13V12.5765L17.501 9.97066L16.499 8.2398L12 10.8445L7.50104 8.2398L6.49896 9.97065Z"></path></svg>
                    Product name:
                  </label>
                  <input class="border rounded-lg px-3 py-1 w-full" id="productName" type="text" name="name" value="<%= locals.productData ? productData.name : "" %>">
              </div>
              <div class="mb-4">
                  <label class="block text-gray-700 mb-2" for="stock">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline" viewBox="0 0 24 24"><path d="M11 19V9H4V19H11ZM11 7V4C11 3.44772 11.4477 3 12 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V8C2 7.44772 2.44772 7 3 7H11ZM13 5V19H20V5H13ZM5 16H10V18H5V16ZM14 16H19V18H14V16ZM14 13H19V15H14V13ZM14 10H19V12H14V10ZM5 13H10V15H5V13Z"></path></svg>
                    In Stock:
                  </label>
                  <input class="border rounded-lg px-3 py-1 w-full" id="stock" type="number" name="stock" value="<%= locals.productData ? productData.stock : "" %>">
              </div>
              <div class="mb-4">
                  <label class="block text-gray-700 mb-2" for="price">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline" viewBox="0 0 24 24"><path d="M5 12.5C5 12.8134 5.46101 13.3584 6.53047 13.8931C7.91405 14.5849 9.87677 15 12 15C14.1232 15 16.0859 14.5849 17.4695 13.8931C18.539 13.3584 19 12.8134 19 12.5V10.3287C17.35 11.3482 14.8273 12 12 12C9.17273 12 6.64996 11.3482 5 10.3287V12.5ZM19 15.3287C17.35 16.3482 14.8273 17 12 17C9.17273 17 6.64996 16.3482 5 15.3287V17.5C5 17.8134 5.46101 18.3584 6.53047 18.8931C7.91405 19.5849 9.87677 20 12 20C14.1232 20 16.0859 19.5849 17.4695 18.8931C18.539 18.3584 19 17.8134 19 17.5V15.3287ZM3 17.5V7.5C3 5.01472 7.02944 3 12 3C16.9706 3 21 5.01472 21 7.5V17.5C21 19.9853 16.9706 22 12 22C7.02944 22 3 19.9853 3 17.5ZM12 10C14.1232 10 16.0859 9.58492 17.4695 8.89313C18.539 8.3584 19 7.81342 19 7.5C19 7.18658 18.539 6.6416 17.4695 6.10687C16.0859 5.41508 14.1232 5 12 5C9.87677 5 7.91405 5.41508 6.53047 6.10687C5.46101 6.6416 5 7.18658 5 7.5C5 7.81342 5.46101 8.3584 6.53047 8.89313C7.91405 9.58492 9.87677 10 12 10Z"></path></svg>
                    Price:
                  </label>
                  <input class="border rounded-lg px-3 py-1 w-full" id="price" type="number" name="price" value="<%= locals.productData ? productData.price : "" %>">
              </div>
              <div class="mb-4">
                  <label class="block text-gray-700 mb-2" for="brand">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline" viewBox="0 0 24 24"><path d="M10 10.1111V1L21 7V21H3V7L10 10.1111ZM12 4.36908V13.1886L5 10.0775V19H19V8.18727L12 4.36908Z"></path></svg>
                    Brand:
                  </label>
                  <input class="border rounded-lg px-3 py-1 w-full" id="brand" type="text" name="brand" value="<%= locals.productData ? productData.brand : "" %>">
              </div>
              <div class="relative mb-4">
                  <label class="block text-gray-700 mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline" viewBox="0 0 24 24"><path d="M10.9042 2.1001L20.8037 3.51431L22.2179 13.4138L13.0255 22.6062C12.635 22.9967 12.0019 22.9967 11.6113 22.6062L1.71184 12.7067C1.32131 12.3162 1.32131 11.683 1.71184 11.2925L10.9042 2.1001ZM11.6113 4.22142L3.83316 11.9996L12.3184 20.4849L20.0966 12.7067L19.036 5.28208L11.6113 4.22142ZM13.7327 10.5854C12.9516 9.80433 12.9516 8.538 13.7327 7.75695C14.5137 6.9759 15.78 6.9759 16.5611 7.75695C17.3421 8.538 17.3421 9.80433 16.5611 10.5854C15.78 11.3664 14.5137 11.3664 13.7327 10.5854Z"></path></svg>
                    Tags:
                  </label>
                  <div id="tag-selector" class="center-y border rounded-lg px-3 py-1 w-full cursor-pointer svg-parent">
                    <span class="text-gray-500">Select tags</span>
                    <svg class="h-5 w-5 ml-auto svg-color" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.9997 13.1714L16.9495 8.22168L18.3637 9.63589L11.9997 15.9999L5.63574 9.63589L7.04996 8.22168L11.9997 13.1714Z"></path></svg>
                  </div>
                  <div id="tag-options" class="flex w-full flex-wrap gap-y-1 gap-x-2 border rounded-lg px-3 py-1 absolute mt-2 bg-white shadow-lg">
                    <% tags.forEach(tag => { %>
                      <% const selectedTags = locals.productData !== undefined ? (productData.tags !== undefined ? productData.tags : []) : [] %>
                      <div class="flex items-center flex-1">

                        <% if (selectedTags.includes(tag)) { %>
                          <input id="<%= tag.replace(' ', '-') %>" checked name="tags" value="<%= tag %>" type="checkbox"
                          class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                        <% } else { %>
                          <input id="<%= tag.replace(' ', '-') %>" name="tags" value="<%= tag %>" type="checkbox"
                          class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                        <% } %>

                        <label for="<%= tag.replace(' ', '-') %>" class="ml-3 min-w-0 flex-1 whitespace-nowrap select-none text-gray-500"><%= tag %></label>
                      </div>
                    <% }) %>
                  </div>
              </div>
              <div class="mb-4">
                  <label class="block text-gray-700 mb-2" for="description">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline" viewBox="0 0 24 24"><path d="M21 15L15 20.996L4.00221 21C3.4487 21 3 20.5551 3 20.0066V3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.45576 21 4.00247V15ZM19 5H5V19H13V14C13 13.4872 13.386 13.0645 13.8834 13.0067L14 13L19 12.999V5ZM18.171 14.999L15 15V18.169L18.171 14.999Z"></path></svg>
                    Description:
                  </label>
                  <input class="border rounded-lg px-3 py-1 w-full" id="description" type="text" name="description" value="<%= locals.productData ? productData.description : "" %>">
              </div>
              <div class="mb-4">
                  <label class="block text-gray-700 mb-2" for="category">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline" viewBox="0 0 24 24"><path d="M10 10.1111V1L21 7V21H3V7L10 10.1111ZM12 4.36908V13.1886L5 10.0775V19H19V8.18727L12 4.36908Z"></path></svg>
                    Category:
                  </label>
                  <select name="category" id="category" class="border w-full px-3 py-1 text-gray-700 rounded-lg">
                    <% const selectedCategory=locals.productData ? productData.category : "" %>
                      <% if (locals.categories) { %>
                        <% categories.forEach(category=> { %>
                          <% if (category==selectedCategory) { %>
                            <option selected value="<%= category %>">
                              <%= category %>
                            </option>
                            <% } else { %>
                              <option value="<%= category %>">
                                <%= category %>
                              </option>
                          <% } %>
                        <% }); %>
                      <% } %>
                  </select>
              </div>
              <div class="mb-4">
                  <label class="inline text-gray-700 mb-2" for="image">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline" viewBox="0 0 24 24"><path d="M21 15L15 20.996L4.00221 21C3.4487 21 3 20.5551 3 20.0066V3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.45576 21 4.00247V15ZM19 5H5V19H13V14C13 13.4872 13.386 13.0645 13.8834 13.0067L14 13L19 12.999V5ZM18.171 14.999L15 15V18.169L18.171 14.999Z"></path></svg>
                    Product picture:
                  </label>
                  <input class="productCover" data-max-file-size="2MB" accept="image/png, image/jpeg" id="image" type="file" name="image">
              </div>
              <%- include ('partials/error') %>
              <div class="text-right">
                <button type="reset" class="bg-red-500 hover:bg-red-300 text-white cursor-pointer py-2 px-4 my-4 mx-6 rounded-md text-center text-base transition duration-300 ease-in-out inline">Reset</button>
                <button type="submit" class="bg-green-500 hover:bg-green-300 text-white cursor-pointer py-2 px-4 my-4 rounded-md text-center text-base transition duration-300 ease-in-out"><%= actions.formAction %></button>
              </div>
            </form>
        </div>
        
    </main>
    <%- include('partials/footer.ejs') %>
    <Script>

      $('#tag-options').hide()
      $('#tag-selector').on('click', () => {
        $('#tag-options').toggle()
      })
    </Script>
</body>
</html>